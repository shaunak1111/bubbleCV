"use strict";function ticked(){node.attr("transform",function(e){return"translate("+e.x+","+e.y+")"}).select("circle").attr("r",function(e){return e.r})}var data=[{cat:"css",name:"sass",value:8,icon:"img/sass.png",desc:"\n        Good experience in using sass was involved in\n        designing the css architecture using sass from scratch.\n    "},{cat:"editor",name:"Sublime",value:7,icon:"img/sublime.png",desc:"\n        Frequently use for sublime text web development.\n        Installed typescript plug in.\n    "},{cat:"language",name:"Javascript",value:8.5,icon:"img/sass.png",desc:"\n        Good experience in javascript for 3.5 years\n        Proficient in OOJS and es5 and es6.\n    "},{cat:"framework",name:"angular1.x",value:8,icon:"img/angular1.png",desc:"\n        2 years experience in angular1.x (need some revision)\n        comfortable in writing directives, controller and services.\n    "},{cat:"framework",name:"angular2/4.x",value:8,icon:"img/angular2.png",desc:"\n        2 years experience in angular1.x (need some revision)\n        comfortable in writing directives, controller and services.\n    "},{cat:"framework",name:"node",value:8,icon:"img/node.png",desc:"\n        1.5 years in writing restful API'S using node.js using express.\n        Used async library handling asynchronous requests.\n    "},{cat:"source-version",name:"Git",value:8,icon:"img/git.jpg",desc:"\n        Exclusively worked in git, using source tree git manager.\n        Experience in working using github and atlassian bitbucket.\n        Contributed to open source http://github.com/shaunak1111\n    "},{cat:"framework",name:"HTML5",value:7,icon:"img/html5.png",desc:"\n        Have used various HTML5 API'S.\n        Mainly used session storage and local storage.\n    "},{cat:"task-runner",name:"Gulp",value:6,icon:"img/gulp.png",desc:"\n        Intermediate experience in gulp.\n        Used in when contributing to open-source angular material project\n        and hosted this D3.js app."}],svg=d3.select("#teck-stack-svg"),width=svg.property("clientWidth"),height=+svg.attr("height"),centerX=.5*width,centerY=.5*height,strength=.05,focusedNode=void 0;console.log("width",width);var format=d3.format(",d"),scaleColor=d3.scaleOrdinal(d3.schemeCategory20),pack=d3.pack().size([width,height]).padding(1.5),forceCollide=d3.forceCollide(function(e){return e.r+1}),simulation=d3.forceSimulation().force("charge",d3.forceManyBody()).force("collide",forceCollide).force("x",d3.forceX(centerX).strength(strength)).force("y",d3.forceY(centerY).strength(strength));"matchMedia"in window&&window.matchMedia("(max-device-width: 767px)").matches&&(data=data.filter(function(e){return e.value>=50}));var root=d3.hierarchy({children:data}).sum(function(e){return e.value}),nodes=pack(root).leaves().map(function(e){var n=e.data;return{x:centerX+3*(e.x-centerX),y:centerY+3*(e.y-centerY),r:0,radius:e.r,id:n.cat+"."+n.name.replace(/\s/g,"-"),cat:n.cat,name:n.name,value:n.value,icon:n.icon,desc:n.desc}});simulation.nodes(nodes).on("tick",ticked),svg.style("background-color","#eee");var node=svg.selectAll(".node").data(nodes).enter().append("g").attr("class","node").call(d3.drag().on("start",function(e){d3.event.active||simulation.alphaTarget(.2).restart(),e.fx=e.x,e.fy=e.y}).on("drag",function(e){e.fx=d3.event.x,e.fy=d3.event.y}).on("end",function(e){d3.event.active||simulation.alphaTarget(0),e.fx=null,e.fy=null}));node.append("circle").attr("id",function(e){return e.id}).attr("r",0).style("fill",function(e){return scaleColor(e.cat)}).transition().duration(2e3).ease(d3.easeElasticOut).tween("circleIn",function(e){var n=d3.interpolateNumber(0,e.radius);return function(t){e.r=n(t),simulation.force("collide",forceCollide)}}),node.append("clipPath").attr("id",function(e){return"clip-"+e.id}).append("use").attr("xlink:href",function(e){return"#"+e.id}),node.filter(function(e){return!String(e.icon).includes("img/")}).append("text").classed("node-icon",!0).attr("clip-path",function(e){return"url(#clip-"+e.id+")"}).selectAll("tspan").data(function(e){return e.icon.split(";")}).enter().append("tspan").attr("x",0).attr("y",function(e,n,t){return 13+10*(n-t.length/2-.5)}).text(function(e){return e}),node.filter(function(e){return String(e.icon).includes("img/")}).append("image").classed("node-icon",!0).attr("clip-path",function(e){return"url(#clip-"+e.id+")"}).attr("xlink:href",function(e){return e.icon}).attr("x",function(e){return.5*-e.radius}).attr("y",function(e){return.5*-e.radius}).attr("height",function(e){return 2*e.radius*.5}).attr("width",function(e){return 2*e.radius*.5}),node.append("title").text(function(e){return e.cat+"::"+e.name+"\n"+format(e.value)});var legendOrdinal=d3.legendColor().scale(scaleColor).shape("circle"),infoBox=node.append("foreignObject").classed("circle-overlay hidden",!0).attr("x",-140).attr("y",-140).attr("height",280).attr("width",280).append("xhtml:div").classed("circle-overlay__inner",!0);infoBox.append("h2").classed("circle-overlay__title",!0).text(function(e){return e.name}),infoBox.append("p").classed("circle-overlay__body",!0).html(function(e){return e.desc}),node.on("click",function(e){d3.event.stopPropagation(),console.log("currentNode",e);var n=d3.event.currentTarget;if(e!==focusedNode){var t=focusedNode;focusedNode=e,simulation.alphaTarget(.2).restart(),d3.selectAll(".circle-overlay").classed("hidden",!0),d3.selectAll(".node-icon").classed("node-icon--faded",!1),t&&(t.fx=null,t.fy=null,node.filter(function(e,n){return n===t.index}).transition().duration(2e3).ease(d3.easePolyOut).tween("circleOut",function(){var e=d3.interpolateNumber(t.r,t.radius);return function(n){t.r=e(n)}}).on("interrupt",function(){t.r=t.radius})),d3.transition().duration(2e3).ease(d3.easePolyOut).tween("moveIn",function(){console.log("tweenMoveIn",e);var n=d3.interpolateNumber(e.x,centerX),t=d3.interpolateNumber(e.y,centerY),r=d3.interpolateNumber(e.r,.5*centerY);return function(i){e.fx=n(i),e.fy=t(i),e.r=r(i),simulation.force("collide",forceCollide)}}).on("end",function(){simulation.alphaTarget(0);var e=d3.select(n);e.select(".circle-overlay").classed("hidden",!1),e.select(".node-icon").classed("node-icon--faded",!0)}).on("interrupt",function(){console.log("move interrupt",e),e.fx=null,e.fy=null,simulation.alphaTarget(0)})}}),d3.select(document).on("click",function(){!d3.event.target.closest("#circle-overlay")&&focusedNode&&(focusedNode.fx=null,focusedNode.fy=null,simulation.alphaTarget(.2).restart(),d3.transition().duration(2e3).ease(d3.easePolyOut).tween("moveOut",function(){console.log("tweenMoveOut",focusedNode);var e=d3.interpolateNumber(focusedNode.r,focusedNode.radius);return function(n){focusedNode.r=e(n),simulation.force("collide",forceCollide)}}).on("end",function(){focusedNode=null,simulation.alphaTarget(0)}).on("interrupt",function(){simulation.alphaTarget(0)}),d3.selectAll(".circle-overlay").classed("hidden",!0),d3.selectAll(".node-icon").classed("node-icon--faded",!1))});